<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
        <h:form id="companiesListForm">
				<br />
				<p:panel header="#{loc.ListComCompanyTitle}"
					style="margin-left:auto; margin-right:auto ; width:88%">
					<p:dataTable var="company"
						value="#{employeesAndAllocationsBean.companiesList}"
						selectionMode="single"
						selection="#{employeesAndAllocationsBean.selectedCompany}"
						rowKey="#{company.id}" paginator="true" rows="10"
						rowsPerPageTemplate="10,20,30">

						<p:ajax event="rowSelect" update="@all"
							listener="#{employeesAndAllocationsBean.onCompanySelect}" />
						<br />

						<p:column headerText="#{loc.ListComCompanyTitle_id}"
							style="width:50px;" filterBy="#{company.id}"
							sortBy="#{company.id}" filterStyle="width:30px">
							<h:outputText value="#{company.id}" />
						</p:column>

						<p:column headerText="#{loc.ListComCompanyTitle_name}"
							filterBy="#{company.companyName}" sortBy="#{company.companyName}">

							<h:outputText value="#{company.companyName}" />
						</p:column>

						<p:column
							headerText="#{loc.ListComCompanyTitle_fedralIdentityCode}"
							sortBy="#{company.federalIdentityCode}" style="width:160px;"
							filterBy="#{company.federalIdentityCode}">

							<h:outputText value="#{company.federalIdentityCode}" />
						</p:column>

						<p:column filterBy="#{company.lastModificationDate}"
							sortBy="#{company.lastModificationDate}" style="width:160px;"
							headerText="#{loc.ListComCompanyTitle_lastModifyingDate}">
							<f:facet name="filter">
								<p:calendar onclick="PF('datalist').filter()"
									onblur="PF('datalist').filter()" pattern="dd/MM/yyyy"
									onchange="PF('datalist').filter()" />
							</f:facet>
							<h:outputText value="#{company.lastModificationDate}">
								<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT+2	" />
							</h:outputText>
						</p:column>

						<p:column
							headerText="#{loc.ListComCompanyTitle_companyNameAlternative}"
							filterBy="#{company.alternativeCompanyName}" style="width:200px;"
							sortBy="#{company.alternativeCompanyName}">

							<h:outputText value="#{company.alternativeCompanyName}" />
						</p:column>

						<p:column
							headerText="#{loc.ListComCompanyTitle_modifiedByUserName}"
							filterBy="#{company.modificationMakerName}"
							sortBy="#{company.modificationMakerName}">

							<h:outputText value="#{item.modificationMakerName}" />
						</p:column>

						<p:column headerText="#{loc.ListComCompanyTitle_comState}"
							filterBy="#{company.state.stateName}"
							sortBy="#{item.state.stateName}">
							<h:outputText value="#{item.state.stateName}" />

						</p:column>

						<p:column headerText="#{loc.ListComCompanyTitle_comCountry}"
							filterBy="#{company.state.stateId.country.countryName}"
							sortBy="#{company.state.stateId.country.countryName}">
							<h:outputText
								value="#{company.state.stateId.country.countryName}" />
						</p:column>

					</p:dataTable>
				</p:panel>
			</h:form>
    </ui:composition>
</html>
